<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta name="theme-color" content="#5b7c89">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Loader (Bootstrap.php) &mdash; Silex-MVC</title>
        <meta name="viewport" content="width=device-width,initial-scale=1">
    <!--<link rel="icon" href="/silex-mvc/favicon.ico">-->
    <link rel="stylesheet" href="/silex-mvc/components/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/silex-mvc/css/style.css?v=6">
    <link rel="stylesheet" href="/silex-mvc/components/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/silex-mvc/components/highlightjs/styles/github.css" />
    
    <link rel="apple-touch-icon" sizes="57x57" href="/silex-mvc/images/silex/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/silex-mvc/images/silex/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/silex-mvc/images/silex/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/silex-mvc/images/silex/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/silex-mvc/images/silex/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/silex-mvc/images/silex/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/silex-mvc/images/silex/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/silex-mvc/images/silex/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/silex-mvc/images/silex/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/silex-mvc/images/silex/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/silex-mvc/images/silex/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/silex-mvc/images/silex/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/silex-mvc/images/silex/favicon-16x16.png">
    <link rel="manifest" href="/silex-mvc/images/silex/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/silex-mvc/images/silex/ms-icon-144x144.png">
    
</head>
<body>
    <a class="fork-me-on-github" href="https://github.com/bsa-git/silex-mvc/" target="_blank"><img src="/silex-mvc/assets/right-red@2x.png" alt="Fork me on GitHub"></a>
    <header class="site">
        <nav class="navbar navbar-default navbar-static-top" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <div class="site-mascot" title="Silex-MVC"></div>
                    <a class="navbar-brand" href="/silex-mvc/">Silex-MVC</a>
                </div>
                <div class="collapse navbar-collapse navbar-ex1-collapse">
                    <ul class="nav navbar-nav">
                        <li >
                            <a href="/silex-mvc/">About</a>
                        </li>
                        <li >
                            <a href="/silex-mvc/getstarted/">Get Started</a>
                        </li>
                        <li >
                            <a href="/silex-mvc/download/">Download</a>
                        </li>
                        <li >
                            <a href="/silex-mvc/documentation/">Documentation</a>
                        </li>
                        <li >
                            <a href="/silex-mvc/community/">Community</a>
                        </li>
                                            </ul>
                </div>
            </div>
        </nav>
    </header>
        <section class="content">
        <div class="container">
                <div class="row">
        <div class="col-sm-3">
            <div class="sculpin-sidebar">
                <ul class="nav">
                                            <li ><a href="/silex-mvc/getstarted/">Get Started</a>
                                                    </li>
                                            <li ><a href="/silex-mvc/documentation/basic-project/">Basic Project</a>
                                                    </li>
                                            <li ><a href="/silex-mvc/documentation/configuration/">Configuration</a>
                                                    </li>
                                            <li ><a href="/silex-mvc/documentation/web-app">Web application (app)</a>
                                                            <ul class="nav">
                                                                            <li  class="active" ><a href="/silex-mvc/documentation/web-app/bootstrap/">Loader (Bootstrap.php)</a>
                                                                            <li ><a href="/silex-mvc/documentation/web-app/controllers/">Controllers</a>
                                                                            <li ><a href="/silex-mvc/documentation/web-app/forms/">Forms</a>
                                                                            <li ><a href="/silex-mvc/documentation/web-app/models/">Models</a>
                                                                            <li ><a href="/silex-mvc/documentation/web-app/services/">Services</a>
                                                                            <li ><a href="/silex-mvc/documentation/web-app/layouts/">Layouts</a>
                                                                            <li ><a href="/silex-mvc/documentation/web-app/locale/">Localization</a>
                                                                            <li ><a href="/silex-mvc/documentation/web-app/security/">Security</a>
                                                                    </ul>
                                                    </li>
                                            <li ><a href="/silex-mvc/documentation/web-public">Web application (public)</a>
                                                            <ul class="nav">
                                                                            <li ><a href="/silex-mvc/documentation/web-public/main/">Loader (main.js)</a>
                                                                            <li ><a href="/silex-mvc/documentation/web-public/locale/">Localization</a>
                                                                            <li ><a href="/silex-mvc/documentation/web-public/services/">Services</a>
                                                                            <li ><a href="/silex-mvc/documentation/web-public/backbone/">Backbone</a>
                                                                    </ul>
                                                    </li>
                                            <li ><a href="/silex-mvc/documentation/console-app">Console application</a>
                                                            <ul class="nav">
                                                                            <li ><a href="/silex-mvc/documentation/console-app/bootstrap/">Loader (Bootstrap.php)</a>
                                                                            <li ><a href="/silex-mvc/documentation/console-app/configuration/">Configuration</a>
                                                                            <li ><a href="/silex-mvc/documentation/console-app/lifecycle/">Life Cycle</a>
                                                                    </ul>
                                                    </li>
                                    </ul>
            </div>
        </div>
        <div class="col-sm-9">
            <h1>Loader (Bootstrap.php)</h1>
            <p>Class <strong>Bootstrap</strong> performs the following methods:</p>

<ul>
<li><strong>Creating an application</strong> <code>__construct()</code></li>
</ul>

<pre><code>// Create app
$app = new Silex\Application();
$this-&gt;app = $app;
</code></pre>

<ul>
<li><strong>Creating handlers middleware</strong> <code>_iniMiddlewares</code></li>
<li><strong>Configuration application</strong> <code>_iniConfig</code></li>
<li><strong>Initialization providers</strong> <code>_iniProviders</code></li>
<li><strong>Initialization services</strong> <code>_iniServices</code> Ð¸ <code>_extendServices</code></li>
<li><strong>Initialization controllers</strong> <code>_iniControllers</code></li>
<li><strong>Initialization application</strong> <code>_iniApplication</code></li>
</ul>

<h2 id="creating-handlers-middleware">Creating handlers middleware</h2>

<p>Create an event handler at different points of the request processing cycle.</p>

<ul>
<li>The middleware is run <strong>before the routing and the security</strong>:</li>
</ul>

<pre><code>$app-&gt;before(function (Request $request, Application $app) {
    // ...
}, Application::EARLY_EVENT);

</code></pre>

<ul>
<li>The middleware is run <strong>after the routing and the security</strong>, but before the controller is executed:</li>
</ul>

<pre><code>$app-&gt;before(function (Request $request, Application $app) {
    // ...
});
</code></pre>

<ul>
<li>An after application middleware allows you to tweak the Response <strong>before it is 
sent to the client</strong>:</li>
</ul>

<pre><code>$app-&gt;after(function (Request $request, Response $response) {
    // ...
});
</code></pre>

<ul>
<li>A finish application middleware allows you to execute tasks <strong>after the 
Response has been sent to the client</strong> (like sending emails or logging):</li>
</ul>

<pre><code>$app-&gt;finish(function (Request $request, Response $response) {
    // ...
    // Warning: modifications to the Request or Response will be ignored
});
</code></pre>

<h2 id="configuration-application">Configuration application</h2>

<p>This defines the type of configuration:</p>

<pre><code>// Set type configuration
$app['yml_config'] = FALSE;
</code></pre>

<p>The configuration is set using <code>yml</code> file or using <code>ini</code> file.</p>

<p>There are set values of the main parameters of your configuration that 
can be used in your other configurations.
The parameter values can be accessed through <code>$app['config']['parameters']</code>.</p>

<p>The values of the main parameters:</p>

<ul>
<li><strong>Time zone</strong> (timezone)</li>
<li><strong>Language localization</strong> (locale)</li>
<li><strong>The color scheme of the site</strong> (scheme)</li>
<li><strong>The sign debug</strong> (debug)</li>
<li><strong>Environment</strong> (environment)</li>
<li><strong>Database Options</strong> (db.driver, db.path, db.name, db.models.path, db.models.namespace, db.connection.production, db.connection.development, db.connection.test)</li>
<li><strong>Email settings</strong> (mail.host, mail.port,  mail.username,  mail.password)</li>
<li><strong>PagerFanta parameters</strong> (pagerfanta.max_per_page, pagerfanta.proximity)</li>
</ul>

<h2 id="initialization-providers">Initialization providers</h2>

<p>Initialization providers also depends on the type of configuration.
Else <code>$app['yml_config'] = TRUE;</code> then providers are set such as shown below.</p>

<pre><code>if ($app['yml_config']) {
    foreach ($app['config']['service_providers'] as $serviceProviderConfig) {
        $app-&gt;register(
                new $serviceProviderConfig['class'](
                (!isset($serviceProviderConfig['construct_parameters'])) ?
                        null : $serviceProviderConfig['construct_parameters']
                ), (isset($serviceProviderConfig['parameters']) &amp;&amp;
                null !== $serviceProviderConfig['parameters']) ?
                        $serviceProviderConfig['parameters'] : array()
        );
    }
}
</code></pre>

<p>Otherwise providers are set manually.</p>

<pre><code>...
// Monolog
$app-&gt;register(new Silex\Provider\MonologServiceProvider(), array(
    'monolog.logfile' =&gt; "{$app['config']['log_path']}/application.log",
    'monolog.name' =&gt; 'APPLICATION'
));
...
</code></pre>

<h2 id="initialization-services">Initialization services</h2>

<p>With class <strong>MyService</strong> <code>app/Services/MyService.php</code> installed services <code>app/Services/My</code>.</p>

<p>This includes the following services:</p>

<ul>
<li><strong>Working with arrays</strong> (<code>ArrayBox.php</code>)</li>
<li><strong>Working with XML</strong> (<code>CrXml.php</code>)</li>
<li><strong>Working with HTTP</strong> (<code>Http.php</code>)</li>
<li><strong>Work with parameters</strong> (<code>ParamBox.php</code>)</li>
<li><strong>Working with strings</strong> (<code>String.php</code>)</li>
<li><strong>Common Functions</strong> (<code>System.php</code>)</li>
</ul>

<p>With class <strong>Zf2Service</strong> <code>app/Services/Zf2Service.php</code> installed services from 
<strong>Zend Framework 2</strong>  <code>vendor/zendframework</code>.</p>

<p>This includes the following services:</p>

<ul>
<li><a href="http://zf2.readthedocs.org/en/latest/modules/zend.filter.html">Zend-Filter</a></li>
<li><a href="http://zf2.readthedocs.org/en/latest/modules/zend.json.introduction.html">Zend-Json</a></li>
</ul>

<p>With metod <code>_extendServices</code> of class <strong>Bootstrap</strong> loader <code>app/Console/Bootstrap.php</code> 
extends the functionality of some services such as: <code>$app['translator']</code>, <code>$app['twig']</code>.</p>

<h2 id="initialization-controllers">Initialization controllers</h2>

<p>Creating and initializing the controllers takes place via a method <strong>_ iniControllers</strong>.</p>

<pre><code>/**
 *  Initialization controllers
 * 
 * @param Application $app
 */
private function _iniControllers(Application $app) {

    ...

    // Load controllers
    foreach ($app['config']['controllers'] as $controllerServiceName =&gt; $controllerClass) {
        $app[$controllerServiceName] = $app-&gt;share(function () use ($app, $controllerClass) {
            return new $controllerClass($app);
        });
        $controller = $app[$controllerServiceName];
    }
}
</code></pre>

<p>List controllers classes stored in a file <code>app/Resources/Config/parameters.yml</code>.</p>

<h2 id="initialization-application">Initialization application</h2>

<p>In this method, you create a directorys necessary for the functioning of the web application.
This is the first time the console is started.</p>

<pre><code>// Create application paths
$app['my']-&gt;get('config')-&gt;createAppPaths();
</code></pre>
        </div>
    </div>
        </div>
    </section>
    <footer class="site">
        <div class="container">
                            <div class="mascot">
                    <a class="ir" href="https://sculpin.io/" target="_blank" title="The site is created using Sculpin Static Site Generator"></a>
                </div>
                <div class="social">
                    <ul>
                        <li>
                            <a href="http://silex.sensiolabs.org/contributors" target="_blank" title="Silex contributors"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span></a>
                        </li>
                        <li>
                            <a href="http://symfony.com/blog/" target="_blank" title="Symfony blog"><span class="glyphicon glyphicon-user" aria-hidden="true"></span></a>
                        </li>
                        <li>
                            <a href="http://symfony.com/community" target="_blank" title="Symfony community" ><span class="glyphicon glyphicon-comment" aria-hidden="true"></span></a>
                        </li>
                    </ul>
                </div>
                <div class="copyright">
                    &copy;2016 <a href="https://github.com/bsa-git/" target="_blank">Sergei Beskorovainyi</a>
                    (<a href="mailto:bsa2657@jandex.ru?subject=Silex-MVC">Email</a>)
                </div>
                    </div>
    </footer>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/silex-mvc/components/jquery/jquery.min.js"><\/script>')</script>
    <script defer src="/silex-mvc/components/bootstrap/js/bootstrap.min.js"></script>
</body>
</html>
